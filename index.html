<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>寶貝成長記錄</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- 載入畫面 -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="baby-heart">
                <i class="fas fa-heart"></i>
            </div>
            <h2>寶貝成長記錄</h2>
            <p>守護每個珍貴的時刻</p>
        </div>
    </div>

    <!-- 主要容器 -->
    <div id="app" class="app-container" style="display: none;">
        <!-- 頂部導航 -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-baby"></i> 寶貝成長記錄</h1>
                <div class="header-controls">
                    <button id="themeToggle" class="theme-toggle" title="切換主題">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="settingsBtn" class="settings-btn" title="設定">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- 孩子選擇區 -->
        <div class="child-selector">
            <div class="child-selector-content">
                <select id="childSelect" class="child-select">
                    <option value="">請先添加孩子</option>
                </select>
                <button id="addChildBtn" class="add-child-btn">
                    <i class="fas fa-plus"></i> 添加孩子
                </button>
            </div>
        </div>

        <!-- 主要內容區 -->
        <main class="main-content">
            <!-- 快速記錄區 -->
            <section class="quick-record">
                <h2><i class="fas fa-tachometer-alt"></i> 快速記錄</h2>
                <div class="quick-buttons">
                    <button class="quick-btn feeding-btn" data-type="feeding">
                        <i class="fas fa-baby-carriage"></i>
                        <span>餵食</span>
                    </button>
                    <button class="quick-btn sleep-btn" data-type="sleep">
                        <i class="fas fa-bed"></i>
                        <span>睡眠</span>
                    </button>
                    <button class="quick-btn diaper-btn" data-type="diaper">
                        <i class="fas fa-baby"></i>
                        <span>尿布</span>
                    </button>
                    <button class="quick-btn health-btn" data-type="health">
                        <i class="fas fa-stethoscope"></i>
                        <span>健康</span>
                    </button>
                    <button class="quick-btn activity-btn" data-type="activity">
                        <i class="fas fa-gamepad"></i>
                        <span>活動</span>
                    </button>
                    <button class="quick-btn interaction-btn" data-type="interaction">
                        <i class="fas fa-heart"></i>
                        <span>互動</span>
                    </button>
                </div>
            </section>

            <!-- 今日摘要 -->
            <section class="today-summary">
                <h2><i class="fas fa-calendar-day"></i> 今日摘要</h2>
                <div id="todaySummary" class="summary-cards">
                    <!-- 動態生成摘要卡片 -->
                </div>
            </section>

            <!-- 統計圖表區 -->
            <section class="charts-section">
                <h2><i class="fas fa-chart-line"></i> 統計圖表</h2>
                <div class="chart-tabs">
                    <button class="chart-tab active" data-chart="feeding">餵食統計</button>
                    <button class="chart-tab" data-chart="sleep">睡眠統計</button>
                    <button class="chart-tab" data-chart="growth">成長統計</button>
                </div>
                <div class="chart-container">
                    <canvas id="mainChart"></canvas>
                </div>
            </section>

            <!-- 記錄歷史 -->
            <section class="records-section">
                <h2><i class="fas fa-history"></i> 記錄歷史</h2>
                <div class="record-filters">
                    <select id="recordTypeFilter">
                        <option value="">所有記錄</option>
                        <option value="feeding">餵食記錄</option>
                        <option value="sleep">睡眠記錄</option>
                        <option value="diaper">尿布記錄</option>
                        <option value="health">健康記錄</option>
                        <option value="activity">活動記錄</option>
                        <option value="interaction">互動記錄</option>
                    </select>
                    <input type="date" id="recordDateFilter" class="date-filter">
                </div>
                <div id="recordsList" class="records-list">
                    <!-- 動態生成記錄列表 -->
                </div>
            </section>

            <!-- 里程碑區 -->
            <section class="milestones-section">
                <h2><i class="fas fa-trophy"></i> 成長里程碑</h2>
                <div class="milestone-categories">
                    <button class="milestone-tab active" data-category="motor">運動能力</button>
                    <button class="milestone-tab" data-category="language">語言發展</button>
                    <button class="milestone-tab" data-category="social">社交能力</button>
                    <button class="milestone-tab" data-category="cognitive">認知發展</button>
                    <button class="milestone-tab" data-category="self_care">自理能力</button>
                    <button class="milestone-tab" data-category="custom">自定義</button>
                </div>
                <div id="milestonesList" class="milestones-list">
                    <!-- 動態生成里程碑列表 -->
                </div>
                <button id="addMilestoneBtn" class="add-milestone-btn">
                    <i class="fas fa-plus"></i> 添加里程碑
                </button>
            </section>
        </main>

        <!-- 底部導航 -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-section="dashboard">
                <i class="fas fa-home"></i>
                <span>首頁</span>
            </button>
            <button class="nav-item" data-section="records">
                <i class="fas fa-list"></i>
                <span>記錄</span>
            </button>
            <button class="nav-item" data-section="milestones">
                <i class="fas fa-trophy"></i>
                <span>里程碑</span>
            </button>
            <button class="nav-item" data-section="statistics">
                <i class="fas fa-chart-bar"></i>
                <span>統計</span>
            </button>
            <button class="nav-item" data-section="settings">
                <i class="fas fa-cog"></i>
                <span>設定</span>
            </button>
        </nav>
    </div>

    <!-- 模態對話框 -->
    <!-- 孩子資料對話框 -->
    <div id="childModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="childModalTitle">添加孩子</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="childForm">
                    <input type="hidden" id="childId">
                    <div class="form-group">
                        <label for="childName">姓名</label>
                        <input type="text" id="childName" required>
                    </div>
                    <div class="form-group">
                        <label for="childBirthDate">出生日期</label>
                        <input type="date" id="childBirthDate" required>
                    </div>
                    <div class="form-group">
                        <label for="childGender">性別</label>
                        <select id="childGender">
                            <option value="boy">男孩</option>
                            <option value="girl">女孩</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="childPhoto">照片</label>
                        <div class="photo-upload">
                            <input type="file" id="childPhoto" accept="image/*">
                            <div id="photoPreview" class="photo-preview"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="childNotes">備註</label>
                        <textarea id="childNotes" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelChild">取消</button>
                <button type="submit" form="childForm" class="btn-primary">保存</button>
                <button type="button" class="btn-danger" id="deleteChild" style="display: none;">刪除</button>
            </div>
        </div>
    </div>

    <!-- 記錄對話框 -->
    <div id="recordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="recordModalTitle">新增記錄</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="recordForm">
                    <input type="hidden" id="recordId">
                    <input type="hidden" id="recordType">
                    
                    <!-- 通用欄位 -->
                    <div class="form-group">
                        <label for="recordDate">日期</label>
                        <input type="date" id="recordDate" required>
                    </div>
                    <div class="form-group">
                        <label for="recordTime">時間</label>
                        <input type="time" id="recordTime" required>
                    </div>

                    <!-- 餵食記錄專用欄位 -->
                    <div id="feedingFields" class="record-fields" style="display: none;">
                        <div class="form-group">
                            <label for="feedingType">類型</label>
                            <select id="feedingType">
                                <option value="breast">母乳</option>
                                <option value="formula">配方奶</option>
                                <option value="solid">副食品</option>
                            </select>
                        </div>
                        <div id="breastFields" class="feeding-subfields">
                            <div class="form-group">
                                <label for="breastSide">哺乳側</label>
                                <select id="breastSide">
                                    <option value="left">左側</option>
                                    <option value="right">右側</option>
                                    <option value="both">雙側</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="breastDuration">時長（分鐘）</label>
                                <input type="number" id="breastDuration" min="1">
                            </div>
                        </div>
                        <div id="formulaFields" class="feeding-subfields" style="display: none;">
                            <div class="form-group">
                                <label for="formulaAmount">奶量（ml）</label>
                                <input type="number" id="formulaAmount" min="1">
                            </div>
                        </div>
                        <div id="solidFields" class="feeding-subfields" style="display: none;">
                            <div class="form-group">
                                <label for="solidAmount">份量（g）</label>
                                <input type="number" id="solidAmount" min="1">
                            </div>
                            <div class="form-group">
                                <label for="solidType">食物類型</label>
                                <input type="text" id="solidType" placeholder="例：米糊、蔬菜泥">
                            </div>
                        </div>
                    </div>

                    <!-- 睡眠記錄專用欄位 -->
                    <div id="sleepFields" class="record-fields" style="display: none;">
                        <div class="form-group">
                            <label for="sleepStartTime">開始時間</label>
                            <input type="time" id="sleepStartTime">
                        </div>
                        <div class="form-group">
                            <label for="sleepEndTime">結束時間</label>
                            <input type="time" id="sleepEndTime">
                        </div>
                        <div class="form-group">
                            <label for="sleepQuality">睡眠品質</label>
                            <select id="sleepQuality">
                                <option value="good">良好</option>
                                <option value="fair">一般</option>
                                <option value="poor">不佳</option>
                            </select>
                        </div>
                    </div>

                    <!-- 尿布記錄專用欄位 -->
                    <div id="diaperFields" class="record-fields" style="display: none;">
                        <div class="form-group">
                            <label for="diaperType">類型</label>
                            <select id="diaperType">
                                <option value="wet">尿濕</option>
                                <option value="soiled">排便</option>
                                <option value="both">混合</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="diaperConsistency">便便狀態（排便時）</label>
                            <select id="diaperConsistency">
                                <option value="">請選擇</option>
                                <option value="normal">正常</option>
                                <option value="soft">偏軟</option>
                                <option value="hard">偏硬</option>
                                <option value="watery">水狀</option>
                            </select>
                        </div>
                    </div>

                    <!-- 健康記錄專用欄位 -->
                    <div id="healthFields" class="record-fields" style="display: none;">
                        <div class="form-group">
                            <label for="healthType">類型</label>
                            <select id="healthType">
                                <option value="vaccination">疫苗接種</option>
                                <option value="medication">用藥記錄</option>
                                <option value="illness">疾病記錄</option>
                                <option value="checkup">體檢記錄</option>
                                <option value="temperature">體溫記錄</option>
                            </select>
                        </div>
                        <div id="temperatureFields" class="health-subfields" style="display: none;">
                            <div class="form-group">
                                <label for="temperature">體溫（°C）</label>
                                <input type="number" id="temperature" step="0.1" min="30" max="45">
                            </div>
                            <div class="form-group">
                                <label for="temperatureMethod">測量方式</label>
                                <select id="temperatureMethod">
                                    <option value="oral">口溫</option>
                                    <option value="rectal">肛溫</option>
                                    <option value="ear">耳溫</option>
                                    <option value="forehead">額溫</option>
                                    <option value="armpit">腋溫</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="healthDetails">詳細訊息</label>
                            <textarea id="healthDetails" rows="3"></textarea>
                        </div>
                    </div>

                    <!-- 活動記錄專用欄位 -->
                    <div id="activityFields" class="record-fields" style="display: none;">
                        <div class="form-group">
                            <label for="activityType">活動類型</label>
                            <select id="activityType">
                                <option value="bath">洗澡</option>
                                <option value="massage">按摩</option>
                                <option value="dress">換衣服/護理</option>
                                <option value="tummy_time">俯臥時間</option>
                                <option value="sensory">感官遊戲</option>
                                <option value="reading">親子共讀</option>
                                <option value="music">音樂互動</option>
                                <option value="walk">散步/推車</option>
                                <option value="sunlight">曬太陽</option>
                                <option value="social">社交互動</option>
                                <option value="custom">自定義活動</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="activityDuration">時長（分鐘）</label>
                            <input type="number" id="activityDuration" min="1">
                        </div>
                        <div id="customActivityField" class="form-group" style="display: none;">
                            <label for="customActivity">自定義活動名稱</label>
                            <input type="text" id="customActivity">
                        </div>
                    </div>

                    <!-- 互動記錄專用欄位 -->
                    <div id="interactionFields" class="record-fields" style="display: none;">
                        <div class="form-group">
                            <label for="babyMood">寶寶情緒</label>
                            <select id="babyMood">
                                <option value="happy">開心</option>
                                <option value="calm">平靜</option>
                                <option value="fussy">煩躁</option>
                                <option value="crying">哭泣</option>
                                <option value="sleepy">想睡</option>
                                <option value="alert">警覺</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="interactionType">互動類型</label>
                            <select id="interactionType">
                                <option value="play">遊戲</option>
                                <option value="talk">對話</option>
                                <option value="cuddle">擁抱</option>
                                <option value="sing">唱歌</option>
                                <option value="story">講故事</option>
                                <option value="other">其他</option>
                            </select>
                        </div>
                    </div>

                    <!-- 通用欄位：筆記和照片 -->
                    <div class="form-group">
                        <label for="recordNotes">備註</label>
                        <textarea id="recordNotes" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="recordPhoto">照片</label>
                        <div class="photo-upload">
                            <input type="file" id="recordPhoto" accept="image/*">
                            <div id="recordPhotoPreview" class="photo-preview"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelRecord">取消</button>
                <button type="submit" form="recordForm" class="btn-primary">保存</button>
                <button type="button" class="btn-danger" id="deleteRecord" style="display: none;">刪除</button>
            </div>
        </div>
    </div>

    <!-- 里程碑對話框 -->
    <div id="milestoneModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="milestoneModalTitle">添加里程碑</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="milestoneForm">
                    <input type="hidden" id="milestoneId">
                    <div class="form-group">
                        <label for="milestoneCategory">類別</label>
                        <select id="milestoneCategory" required>
                            <option value="motor">運動能力</option>
                            <option value="language">語言發展</option>
                            <option value="social">社交能力</option>
                            <option value="cognitive">認知發展</option>
                            <option value="self_care">自理能力</option>
                            <option value="custom">自定義</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="milestoneTitle">標題</label>
                        <input type="text" id="milestoneTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="milestoneDescription">描述</label>
                        <textarea id="milestoneDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="milestoneAchievedDate">達成日期</label>
                        <input type="date" id="milestoneAchievedDate">
                    </div>
                    <div class="form-group">
                        <label for="milestoneNotes">備註</label>
                        <textarea id="milestoneNotes" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelMilestone">取消</button>
                <button type="submit" form="milestoneForm" class="btn-primary">保存</button>
                <button type="button" class="btn-danger" id="deleteMilestone" style="display: none;">刪除</button>
            </div>
        </div>
    </div>

    <!-- 設定對話框 -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>設定</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>數據管理</h4>
                    <div class="settings-group">
                        <button id="exportData" class="btn-secondary">
                            <i class="fas fa-download"></i> 匯出數據
                        </button>
                        <button id="importData" class="btn-secondary">
                            <i class="fas fa-upload"></i> 匯入數據
                        </button>
                        <input type="file" id="importFile" accept=".json" style="display: none;">
                    </div>
                </div>
                <div class="settings-section">
                    <h4>外觀設定</h4>
                    <div class="settings-group">
                        <label class="settings-toggle">
                            <span>深色模式</span>
                            <input type="checkbox" id="darkModeToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h4>關於</h4>
                    <div class="about-info">
                        <p><strong>寶貝成長記錄</strong></p>
                        <p>版本 1.0.0</p>
                        <p>用心記錄每個珍貴時刻</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-primary" id="closeSettings">關閉</button>
            </div>
        </div>
    </div>

    <!-- 確認對話框 -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="confirmTitle">確認操作</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">您確定要執行此操作嗎？</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="confirmCancel">取消</button>
                <button type="button" class="btn-danger" id="confirmOk">確定</button>
            </div>
        </div>
    </div>

    <!-- Toast 通知 -->
    <div id="toast" class="toast"></div>

    <!-- 引入 Chart.js -->
    <script src="chart.min.js"></script>
    <!-- 引入主腳本 -->
    <script src="script.js"></script>
</body>
</html>