<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="嬰幼兒照護追蹤系統 - 輕鬆記錄寶寶的成長與照護">
    <title>嬰幼兒照護追蹤系統</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 使用 Google 字體 Noto Sans TC -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app" class="app">
        <!-- 載入畫面 -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-content">
                <div class="logo-container">
                    <div class="logo">
                        <i class="fas fa-baby"></i>
                    </div>
                </div>
                <h1>寶寶照護追蹤</h1>
                <p>正在準備您的應用程式...</p>
                <div class="loading-spinner"></div>
            </div>
        </div>

        <!-- 主要導航欄 -->
        <nav id="main-nav" class="main-nav">
            <div class="nav-header">
                <button id="menu-toggle" class="menu-toggle" aria-label="展開選單">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="app-title">寶寶照護追蹤</div>
                <button id="theme-toggle" class="theme-toggle" aria-label="切換主題">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <div id="nav-content" class="nav-content">
                <div class="child-selector">
                    <label for="current-child">目前寶寶:</label>
                    <select id="current-child" name="current-child">
                        <option value="">請選擇寶寶...</option>
                    </select>
                    <button id="add-child-btn" class="add-btn" aria-label="新增寶寶">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <ul class="nav-links">
                    <li><a href="#dashboard" class="active" data-page="dashboard"><i class="fas fa-home"></i> 儀表板</a></li>
                    <li><a href="#feeding" data-page="feeding"><i class="fas fa-utensils"></i> 餵食記錄</a></li>
                    <li><a href="#sleep" data-page="sleep"><i class="fas fa-moon"></i> 睡眠記錄</a></li>
                    <li><a href="#diaper" data-page="diaper"><i class="fas fa-baby"></i> 尿布記錄</a></li>
                    <li><a href="#health" data-page="health"><i class="fas fa-heartbeat"></i> 健康紀錄</a></li>
                    <li><a href="#milestone" data-page="milestone"><i class="fas fa-trophy"></i> 里程碑</a></li>
                    <li><a href="#interaction" data-page="interaction"><i class="fas fa-smile"></i> 親子互動</a></li>
                    <li><a href="#activity" data-page="activity"><i class="fas fa-running"></i> 日常活動</a></li>
                    <li><a href="#report" data-page="report"><i class="fas fa-chart-line"></i> 統計報告</a></li>
                    <li><a href="#settings" data-page="settings"><i class="fas fa-cog"></i> 設定</a></li>
                </ul>
            </div>
        </nav>

        <!-- 主要內容區 -->
        <main id="main-content" class="main-content">
            <!-- 快速操作區 -->
            <div id="quick-actions" class="quick-actions">
                <button class="quick-btn" data-action="feeding">
                    <i class="fas fa-utensils"></i>
                    <span>餵食</span>
                </button>
                <button class="quick-btn" data-action="sleep">
                    <i class="fas fa-moon"></i>
                    <span>睡眠</span>
                </button>
                <button class="quick-btn" data-action="diaper">
                    <i class="fas fa-baby"></i>
                    <span>尿布</span>
                </button>
                <button class="quick-btn" data-action="health">
                    <i class="fas fa-heartbeat"></i>
                    <span>健康</span>
                </button>
            </div>

            <!-- 頁面內容 -->
            <div id="pages" class="pages">
                <!-- 儀表板頁面 -->
                <section id="dashboard-page" class="page active">
                    <h2>今日概覽</h2>
                    <div id="child-info" class="child-info">
                        <div class="child-photo">
                            <img id="current-child-photo" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='35' r='20' fill='%23ddd'/%3E%3Cpath d='M50 60 C 30 60 15 80 15 100 L 85 100 C 85 80 70 60 50 60 Z' fill='%23ddd'/%3E%3C/svg%3E" alt="寶寶照片">
                        </div>
                        <div class="child-details">
                            <h3 id="current-child-name">歡迎使用</h3>
                            <p id="current-child-age">請點選左上角的選單選擇或新增寶寶</p>
                        </div>
                    </div>
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <h4>今日餵食</h4>
                            <div id="today-feeding-summary" class="summary-content">
                                <p>尚無記錄</p>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <h4>今日睡眠</h4>
                            <div id="today-sleep-summary" class="summary-content">
                                <p>尚無記錄</p>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <h4>今日尿布</h4>
                            <div id="today-diaper-summary" class="summary-content">
                                <p>尚無記錄</p>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <h4>最近活動</h4>
                            <div id="recent-activities" class="summary-content">
                                <p>尚無記錄</p>
                            </div>
                        </div>
                    </div>
                    <div class="dashboard-charts">
                        <div class="chart-container">
                            <h4>近七日睡眠時間</h4>
                            <canvas id="sleep-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h4>近七日餵食次數</h4>
                            <canvas id="feeding-chart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 餵食記錄頁面 -->
                <section id="feeding-page" class="page">
                    <h2>餵食記錄</h2>
                    <div class="action-bar">
                        <button id="add-feeding-btn" class="primary-btn">
                            <i class="fas fa-plus"></i> 新增餵食記錄
                        </button>
                        <div class="filter-group">
                            <label for="feeding-filter">查看:</label>
                            <select id="feeding-filter">
                                <option value="all">所有記錄</option>
                                <option value="breast">母乳</option>
                                <option value="formula">配方奶</option>
                                <option value="solid">副食品</option>
                            </select>
                            <button id="feeding-filter-date" class="filter-date-btn">
                                <i class="fas fa-calendar"></i>
                            </button>
                        </div>
                    </div>
                    <div id="feeding-records" class="records-list">
                        <p class="empty-state">尚無餵食記錄。點擊「新增餵食記錄」按鈕開始追蹤。</p>
                    </div>
                </section>

                <!-- 睡眠記錄頁面 -->
                <section id="sleep-page" class="page">
                    <h2>睡眠記錄</h2>
                    <div class="action-bar">
                        <button id="add-sleep-btn" class="primary-btn">
                            <i class="fas fa-plus"></i> 新增睡眠記錄
                        </button>
                        <div class="filter-group">
                            <button id="sleep-filter-date" class="filter-date-btn">
                                <i class="fas fa-calendar"></i>
                            </button>
                            <button id="current-sleep-btn" class="secondary-btn hidden">
                                <i class="fas fa-stopwatch"></i> 目前睡眠中
                            </button>
                        </div>
                    </div>
                    <div id="sleep-records" class="records-list">
                        <p class="empty-state">尚無睡眠記錄。點擊「新增睡眠記錄」按鈕開始追蹤。</p>
                    </div>
                </section>

                <!-- 尿布記錄頁面 -->
                <section id="diaper-page" class="page">
                    <h2>尿布記錄</h2>
                    <div class="action-bar">
                        <button id="add-diaper-btn" class="primary-btn">
                            <i class="fas fa-plus"></i> 新增尿布記錄
                        </button>
                        <div class="filter-group">
                            <label for="diaper-filter">查看:</label>
                            <select id="diaper-filter">
                                <option value="all">所有記錄</option>
                                <option value="wet">尿液</option>
                                <option value="dirty">排便</option>
                                <option value="mixed">混合</option>
                            </select>
                            <button id="diaper-filter-date" class="filter-date-btn">
                                <i class="fas fa-calendar"></i>
                            </button>
                        </div>
                    </div>
                    <div id="diaper-records" class="records-list">
                        <p class="empty-state">尚無尿布記錄。點擊「新增尿布記錄」按鈕開始追蹤。</p>
                    </div>
                </section>

                <!-- 健康記錄頁面 -->
                <section id="health-page" class="page">
                    <h2>健康記錄</h2>
                    <div class="tab-navigation">
                        <button class="tab-btn active" data-tab="health-general">基本健康</button>
                        <button class="tab-btn" data-tab="health-vaccine">疫苗接種</button>
                        <button class="tab-btn" data-tab="health-medication">用藥記錄</button>
                        <button class="tab-btn" data-tab="health-checkup">健康檢查</button>
                    </div>
                    <div class="tab-content">
                        <div id="health-general-tab" class="tab-pane active">
                            <div class="action-bar">
                                <button id="add-health-measurement-btn" class="primary-btn">
                                    <i class="fas fa-plus"></i> 新增測量
                                </button>
                                <div class="filter-group">
                                    <button id="health-filter-date" class="filter-date-btn">
                                        <i class="fas fa-calendar"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="measurement-grid">
                                <div class="measurement-card" id="weight-card">
                                    <h4>體重記錄</h4>
                                    <div class="measurement-chart">
                                        <canvas id="weight-chart"></canvas>
                                    </div>
                                    <div class="measurement-latest">
                                        <span class="label">最新</span>
                                        <span id="latest-weight" class="value">--</span>
                                        <span class="unit">公斤</span>
                                    </div>
                                </div>
                                <div class="measurement-card" id="height-card">
                                    <h4>身高記錄</h4>
                                    <div class="measurement-chart">
                                        <canvas id="height-chart"></canvas>
                                    </div>
                                    <div class="measurement-latest">
                                        <span class="label">最新</span>
                                        <span id="latest-height" class="value">--</span>
                                        <span class="unit">公分</span>
                                    </div>
                                </div>
                                <div class="measurement-card" id="temperature-card">
                                    <h4>體溫記錄</h4>
                                    <div class="measurement-chart">
                                        <canvas id="temperature-chart"></canvas>
                                    </div>
                                    <div class="measurement-latest">
                                        <span class="label">最新</span>
                                        <span id="latest-temperature" class="value">--</span>
                                        <span class="unit">°C</span>
                                    </div>
                                </div>
                                <div class="measurement-card" id="head-card">
                                    <h4>頭圍記錄</h4>
                                    <div class="measurement-chart">
                                        <canvas id="head-chart"></canvas>
                                    </div>
                                    <div class="measurement-latest">
                                        <span class="label">最新</span>
                                        <span id="latest-head" class="value">--</span>
                                        <span class="unit">公分</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="health-vaccine-tab" class="tab-pane">
                            <div class="action-bar">
                                <button id="add-vaccine-btn" class="primary-btn">
                                    <i class="fas fa-plus"></i> 新增疫苗記錄
                                </button>
                            </div>
                            <div id="vaccine-records" class="records-list">
                                <p class="empty-state">尚無疫苗記錄。</p>
                            </div>
                        </div>
                        <div id="health-medication-tab" class="tab-pane">
                            <div class="action-bar">
                                <button id="add-medication-btn" class="primary-btn">
                                    <i class="fas fa-plus"></i> 新增用藥記錄
                                </button>
                            </div>
                            <div id="medication-records" class="records-list">
                                <p class="empty-state">尚無用藥記錄。</p>
                            </div>
                        </div>
                        <div id="health-checkup-tab" class="tab-pane">
                            <div class="action-bar">
                                <button id="add-checkup-btn" class="primary-btn">
                                    <i class="fas fa-plus"></i> 新增健檢記錄
                                </button>
                            </div>
                            <div id="checkup-records" class="records-list">
                                <p class="empty-state">尚無健檢記錄。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 里程碑頁面 -->
                <section id="milestone-page" class="page">
                    <h2>里程碑追蹤</h2>
                    <div class="tab-navigation">
                        <button class="tab-btn active" data-tab="milestone-motor">動作發展</button>
                        <button class="tab-btn" data-tab="milestone-language">語言發展</button>
                        <button class="tab-btn" data-tab="milestone-social">社交發展</button>
                        <button class="tab-btn" data-tab="milestone-cognitive">認知發展</button>
                        <button class="tab-btn" data-tab="milestone-custom">自訂里程碑</button>
                    </div>
                    <div class="tab-content">
                        <div id="milestone-motor-tab" class="tab-pane active">
                            <div class="milestone-grid" id="motor-milestones">
                                <p class="empty-state">載入中...</p>
                            </div>
                        </div>
                        <div id="milestone-language-tab" class="tab-pane">
                            <div class="milestone-grid" id="language-milestones">
                                <p class="empty-state">載入中...</p>
                            </div>
                        </div>
                        <div id="milestone-social-tab" class="tab-pane">
                            <div class="milestone-grid" id="social-milestones">
                                <p class="empty-state">載入中...</p>
                            </div>
                        </div>
                        <div id="milestone-cognitive-tab" class="tab-pane">
                            <div class="milestone-grid" id="cognitive-milestones">
                                <p class="empty-state">載入中...</p>
                            </div>
                        </div>
                        <div id="milestone-custom-tab" class="tab-pane">
                            <div class="action-bar">
                                <button id="add-custom-milestone-btn" class="primary-btn">
                                    <i class="fas fa-plus"></i> 新增自訂里程碑
                                </button>
                            </div>
                            <div class="milestone-grid" id="custom-milestones">
                                <p class="empty-state">尚無自訂里程碑。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 親子互動頁面 -->
                <section id="interaction-page" class="page">
                    <h2>親子互動記錄</h2>
                    <div class="action-bar">
                        <button id="add-interaction-btn" class="primary-btn">
                            <i class="fas fa-plus"></i> 新增互動記錄
                        </button>
                        <div class="filter-group">
                            <button id="interaction-filter-date" class="filter-date-btn">
                                <i class="fas fa-calendar"></i>
                            </button>
                        </div>
                    </div>
                    <div id="interaction-records" class="records-list interaction-records">
                        <p class="empty-state">尚無互動記錄。點擊「新增互動記錄」按鈕開始記錄美好時光。</p>
                    </div>
                </section>

                <!-- 日常活動頁面 -->
                <section id="activity-page" class="page">
                    <h2>日常活動記錄</h2>
                    <div class="action-bar">
                        <button id="add-activity-btn" class="primary-btn">
                            <i class="fas fa-plus"></i> 新增活動
                        </button>
                        <div class="filter-group">
                            <label for="activity-filter">查看:</label>
                            <select id="activity-filter">
                                <option value="all">所有活動</option>
                                <option value="bath">洗澡</option>
                                <option value="play">遊戲</option>
                                <option value="massage">按摩</option>
                                <option value="other">其他</option>
                            </select>
                            <button id="activity-filter-date" class="filter-date-btn">
                                <i class="fas fa-calendar"></i>
                            </button>
                        </div>
                    </div>
                    <div id="activity-records" class="records-list">
                        <p class="empty-state">尚無活動記錄。點擊「新增活動」按鈕開始記錄。</p>
                    </div>
                </section>

                <!-- 統計報告頁面 -->
                <section id="report-page" class="page">
                    <h2>統計報告</h2>
                    <div class="action-bar">
                        <div class="filter-group">
                            <label for="report-period">期間:</label>
                            <select id="report-period">
                                <option value="7days">最近 7 天</option>
                                <option value="30days">最近 30 天</option>
                                <option value="3months">最近 3 個月</option>
                                <option value="custom">自訂日期</option>
                            </select>
                            <button id="export-report-btn" class="secondary-btn">
                                <i class="fas fa-download"></i> 匯出報告
                            </button>
                            <button id="print-report-btn" class="secondary-btn">
                                <i class="fas fa-print"></i> 列印
                            </button>
                        </div>
                    </div>
                    <div class="report-content">
                        <div class="report-section">
                            <h3>餵食概覽</h3>
                            <div class="report-charts">
                                <div class="chart-container">
                                    <canvas id="feeding-overview-chart"></canvas>
                                </div>
                                <div class="chart-container">
                                    <canvas id="feeding-type-chart"></canvas>
                                </div>
                            </div>
                            <div class="report-summary" id="feeding-report-summary">
                                <p>選擇時間區間以顯示餵食統計資料。</p>
                            </div>
                        </div>
                        <div class="report-section">
                            <h3>睡眠概覽</h3>
                            <div class="report-charts">
                                <div class="chart-container">
                                    <canvas id="sleep-overview-chart"></canvas>
                                </div>
                                <div class="chart-container">
                                    <canvas id="sleep-pattern-chart"></canvas>
                                </div>
                            </div>
                            <div class="report-summary" id="sleep-report-summary">
                                <p>選擇時間區間以顯示睡眠統計資料。</p>
                            </div>
                        </div>
                        <div class="report-section">
                            <h3>尿布概覽</h3>
                            <div class="report-charts">
                                <div class="chart-container">
                                    <canvas id="diaper-overview-chart"></canvas>
                                </div>
                                <div class="chart-container">
                                    <canvas id="diaper-type-chart"></canvas>
                                </div>
                            </div>
                            <div class="report-summary" id="diaper-report-summary">
                                <p>選擇時間區間以顯示尿布統計資料。</p>
                            </div>
                        </div>
                        <div class="report-section">
                            <h3>生長發展</h3>
                            <div class="report-charts">
                                <div class="chart-container">
                                    <canvas id="growth-overview-chart"></canvas>
                                </div>
                            </div>
                            <div class="report-summary" id="growth-report-summary">
                                <p>選擇時間區間以顯示生長發展統計資料。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 設定頁面 -->
                <section id="settings-page" class="page">
                    <h2>設定</h2>
                    <div class="settings-container">
                        <div class="settings-group">
                            <h3>個人化設定</h3>
                            <div class="setting-item">
                                <label for="theme-select">顯示主題</label>
                                <select id="theme-select">
                                    <option value="auto">自動（跟隨系統）</option>
                                    <option value="light">亮色主題</option>
                                    <option value="dark">暗色主題</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label for="timezone-select">時區設定</label>
                                <select id="timezone-select">
                                    <option value="Asia/Taipei">台北（GMT+8）</option>
                                    <option value="Asia/Tokyo">東京（GMT+9）</option>
                                    <option value="Australia/Sydney">雪梨（GMT+10/+11）</option>
                                    <option value="Europe/London">倫敦（GMT+0/+1）</option>
                                    <option value="America/New_York">紐約（GMT-5/-4）</option>
                                    <option value="America/Los_Angeles">洛杉磯（GMT-8/-7）</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label for="quick-actions-select">快速操作項目</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="quick-feeding" checked> 餵食
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="quick-sleep" checked> 睡眠
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="quick-diaper" checked> 尿布
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="quick-health" checked> 健康
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="quick-activity"> 活動
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group">
                            <h3>兒童管理</h3>
                            <div class="setting-item">
                                <button id="manage-children-btn" class="primary-btn">
                                    <i class="fas fa-child"></i> 管理寶寶檔案
                                </button>
                            </div>
                        </div>
                        <div class="settings-group">
                            <h3>資料管理</h3>
                            <div class="setting-item">
                                <button id="backup-data-btn" class="primary-btn">
                                    <i class="fas fa-download"></i> 備份資料
                                </button>
                            </div>
                            <div class="setting-item">
                                <button id="restore-data-btn" class="primary-btn">
                                    <i class="fas fa-upload"></i> 還原資料
                                </button>
                                <input type="file" id="restore-file-input" class="hidden" accept=".json">
                            </div>
                            <div class="setting-item">
                                <button id="export-all-btn" class="primary-btn">
                                    <i class="fas fa-file-export"></i> 匯出全部資料 (CSV)
                                </button>
                            </div>
                            <div class="setting-item backup-status">
                                <label>上次備份時間</label>
                                <span id="last-backup-time">從未備份</span>
                            </div>
                        </div>
                        <div class="settings-group">
                            <h3>關於應用程式</h3>
                            <div class="setting-item">
                                <p class="app-info">
                                    <strong>寶寶照護追蹤</strong><br>
                                    版本 1.0.0<br>
                                    © 2025 寶寶照護追蹤
                                </p>
                            </div>
                            <div class="setting-item">
                                <p class="privacy-note">
                                    本應用程式僅將您的資料儲存在本機裝置中，
                                    不會上傳至任何伺服器。您的寶寶資料安全且私密。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- 模態對話框 -->
        <div id="modal-container" class="modal-container hidden">
            <div class="modal-backdrop"></div>
            <div class="modal">
                <div class="modal-header">
                    <h3 id="modal-title">模態標題</h3>
                    <button id="modal-close" class="modal-close" aria-label="關閉">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="modal-content" class="modal-content">
                    <!-- 動態插入內容 -->
                </div>
                <div class="modal-footer">
                    <button id="modal-cancel" class="secondary-btn">取消</button>
                    <button id="modal-confirm" class="primary-btn">確認</button>
                </div>
            </div>
        </div>

        <!-- 日期選擇器 -->
        <div id="date-picker-container" class="date-picker-container hidden">
            <div class="date-picker-backdrop"></div>
            <div class="date-picker">
                <div class="date-picker-header">
                    <button id="date-picker-prev" class="date-nav-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div id="date-picker-month-year">2025年5月</div>
                    <button id="date-picker-next" class="date-nav-btn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="date-picker-week-days">
                    <div>日</div>
                    <div>一</div>
                    <div>二</div>
                    <div>三</div>
                    <div>四</div>
                    <div>五</div>
                    <div>六</div>
                </div>
                <div id="date-picker-days" class="date-picker-days">
                    <!-- 動態生成日期 -->
                </div>
                <div class="date-picker-footer">
                    <button id="date-picker-today" class="secondary-btn">今天</button>
                    <button id="date-picker-close" class="primary-btn">關閉</button>
                </div>
            </div>
        </div>

        <!-- 通知提示 -->
        <div id="toast-container" class="toast-container"></div>
    </div>

    <!-- 引入 Chart.js 圖表庫 -->
    <script src="./chart.min.js"></script>
    <!-- 引入應用程式邏輯 -->
    <script src="./script.js"></script>
    <script src="./debug.js"></script>
</body>
</html>